!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.Dutier=e.Dutier||{})}(this,function(e){"use strict";var t={_reducers:[],_handlers:[],_middlewares:[],_updateState:function(){}},n=function(e){return function(e){return function(t){return e=Object.assign({},e,t),JSON.parse(JSON.stringify(e))}}(e)},r=function(e){void 0===t._updateState({})&&(t._updateState=n({})),e.forEach(function(e){var n=e(void 0,{type:"@@DUTIER.INITIAL_STATE"}),r=t._reducers.length;t._reducers[r]={reducer:e,initial:n},t._updateState(n)})},o=function(e){return new Promise(function(n){t._reducers.forEach(function(r){var o=r.reducer,a=r.initial,i=o.current?o.current:a,u=o.current=o(i,e,t._updateState({})),c=o(i,{type:"@@Dutier.OLD_STATE",value:e.value}),s=Object.assign({},t._updateState({}),c);if(JSON.stringify(u)!==JSON.stringify(i))return n({action:e,oldState:s,state:t._updateState(u)})})})},a=function(e){var n=e.type,r=e.state;return t._handlers.forEach(function(e){void 0!==e&&"function"==typeof e&&e({type:n,state:r})}),{type:n,state:r}},i=function(e){return t._middlewares.forEach(function(t){return t.call(null,e)}),Promise.resolve({type:e.action.type,state:e.state})},u=function(e){return new Promise(function(t){return e.call(null,t)}).then(o).then(i).then(a)},c=function(){return t._updateState({})},s=function(e){t._handlers.forEach(function(n,r){n===e&&t._handlers.splice(r,1)})},d=function(e){return t._handlers.push(e),function(){s(e)}};e.applyMiddleware=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];t._middlewares=t._middlewares.concat(n)},e.createStore=function(){for(var e=arguments.length,o=Array(e),a=0;a<e;a++)o[a]=arguments[a];return void 0===t._updateState({})&&(t._updateState=n({})),r(o),{dispatch:u,subscribe:d,getState:c}},e.combine=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r(t)},e.devtools=function(e){var t=window.__REDUX_DEVTOOLS_EXTENSION__||window.top.__REDUX_DEVTOOLS_EXTENSION__,n=!1;return t?(e.devtools||(e.devtools=t.connect(),e.devtools.subscribe(function(t){"DISPATCH"===t.type&&t.state&&(n="JUMP_TO_ACTION"===t.payload.type||"JUMP_TO_STATE"===t.payload.type,e.setState(JSON.parse(t.state),!0))}),e.devtools.init(e.getState()),e.subscribe(function(t,r){var o=r&&r.name||"setState";n?n=!1:e.devtools.send(o,t)})),e):(console.warn("Please install/enable Redux devtools extension"),e.devtools=null,e)},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=dutier.min.js.map
